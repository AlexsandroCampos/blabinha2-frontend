<div class="flex flex-col items-center"> <!-- Toda a altura da tela -->
  <!-- Área de mensagens com rolagem -->
  <div class="flex-1 px-4 w-full h-full flex flex-col items-center">
    <div class="w-full max-w-sm sm:max-w-lg md:max-w-2xl responsive mx-auto" id="chat">

      <div *ngFor="let dialog of dialogs"  class="last:mb-50">
        <div class="chat chat-end">
              <div class="chat-image">
                <div class="btn btn-secondary btn-circle w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 pointer-events-none">
                  <svg *ngIf="selectedAvatar == 1" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 fill-primary" viewBox="0 0 60 60" fill="none">
                    <path d="M5 27.5L10.125 27.75C10.4279 25.0136 11.2953 22.3699 12.6723 19.9859C14.0493 17.6019 15.906 15.5296 18.125 13.9L15.325 9.6C14.65 8.4 15 6.875 16.25 6.175C17.5 5.5 18.975 5.9 19.675 7.1L22 11.65C24.5271 10.5632 27.2491 10.0028 30 10.0028C32.7509 10.0028 35.4729 10.5632 38 11.65L40.325 7.1C41.025 5.9 42.5 5.5 43.75 6.175C45 6.875 45.35 8.4 44.675 9.6L41.875 13.9C44.094 15.5296 45.9507 17.6019 47.3277 19.9859C48.7047 22.3699 49.5721 25.0136 49.875 27.75L55 27.5C55.663 27.5 56.2989 27.7634 56.7678 28.2322C57.2366 28.7011 57.5 29.337 57.5 30C57.5 30.663 57.2366 31.2989 56.7678 31.7678C56.2989 32.2366 55.663 32.5 55 32.5L49.875 32.25C49.5721 34.9864 48.7047 37.6301 47.3277 40.0141C45.9507 42.3981 44.094 44.4704 41.875 46.1L44.675 50.4C45.35 51.6 45 53.125 43.75 53.825C42.5 54.5 41.025 54.1 40.325 52.9L38 48.35C35.4729 49.4368 32.7509 49.9972 30 49.9972C27.2491 49.9972 24.5271 49.4368 22 48.35L19.675 52.9C18.975 54.1 17.5 54.5 16.25 53.825C15 53.125 14.65 51.6 15.325 50.4L18.125 46.1C15.906 44.4704 14.0493 42.3981 12.6723 40.0141C11.2953 37.6301 10.4279 34.9864 10.125 32.25L5 32.5C4.33696 32.5 3.70107 32.2366 3.23223 31.7678C2.76339 31.2989 2.5 30.663 2.5 30C2.5 29.337 2.76339 28.7011 3.23223 28.2322C3.70107 27.7634 4.33696 27.5 5 27.5ZM22.675 28.375C23 26.85 23.825 25.5 25 24.475L20.85 18.125C17.7149 20.5336 15.6574 24.0825 15.125 28L22.675 28.375ZM30 22.5C30.8 22.5 31.55 22.625 32.25 22.85L35.7 16.125C33.95 15.4 32.025 15 30 15C27.975 15 26.05 15.4 24.3 16.125L27.75 22.85C28.45 22.625 29.2 22.5 30 22.5ZM37.325 28.375L44.875 28C44.3426 24.0825 42.2851 20.5336 39.15 18.125L35 24.475C36.175 25.5 37 26.85 37.325 28.375ZM37.325 31.625C37 33.15 36.175 34.5 35 35.525L39.15 41.875C42.2851 39.4664 44.3426 35.9175 44.875 32L37.325 31.625ZM30 37.5C29.2 37.5 28.45 37.375 27.725 37.15L24.3 43.875C26.05 44.6 27.975 45 30 45C32.025 45 33.95 44.6 35.7 43.875L32.275 37.15C31.55 37.375 30.8 37.5 30 37.5ZM22.675 31.625L15.125 32C15.675 36 17.775 39.525 20.85 41.875L25 35.525C23.825 34.5 23 33.15 22.675 31.625Z"/>
                  </svg>
                  <svg *ngIf="selectedAvatar == 2" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 fill-primary" viewBox="0 0 60 60" fill="none">
                    <path d="M30 5C28.0109 5 26.1032 5.79018 24.6967 7.1967C23.2902 8.60322 22.5 10.5109 22.5 12.5C22.4992 14.0516 22.9796 15.5653 23.8751 16.8325C24.7706 18.0996 26.0371 19.0578 27.5 19.575V22.5H20V27.5H27.5V49.8C25.65 49.475 23.75 48.95 21.975 48.175C20.125 47.375 18.5 46.4 17.05 45.225C15.6 44.05 14.45 42.775 13.6 41.375L17.5 37.5L7.5 30V37.5C7.5 39.925 8.175 42.2 9.55 44.3C10.9933 46.4899 12.8434 48.3824 15 49.875C17.175 51.475 19.6 52.725 22.2 53.625C24.825 54.525 27.425 55 30 55C32.575 55 35.175 54.5 37.8 53.6C40.4 52.7 42.825 51.45 45 49.875C47.3 48.275 49.075 46.425 50.45 44.3C51.825 42.2 52.5 39.925 52.5 37.5V30L42.5 37.5L46.4 41.375C45.55 42.775 44.4 44.05 42.95 45.225C41.5 46.4 39.875 47.375 38.025 48.175C36.25 48.95 34.35 49.475 32.5 49.8V27.5H40V22.5H32.5V19.55C33.9589 19.0342 35.2225 18.0798 36.1177 16.8177C37.0128 15.5555 37.4957 14.0474 37.5 12.5C37.5 10.5109 36.7098 8.60322 35.3033 7.1967C33.8968 5.79018 31.9891 5 30 5ZM30 10C30.663 10 31.2989 10.2634 31.7678 10.7322C32.2366 11.2011 32.5 11.837 32.5 12.5C32.5 13.163 32.2366 13.7989 31.7678 14.2678C31.2989 14.7366 30.663 15 30 15C29.337 15 28.7011 14.7366 28.2322 14.2678C27.7634 13.7989 27.5 13.163 27.5 12.5C27.5 11.837 27.7634 11.2011 28.2322 10.7322C28.7011 10.2634 29.337 10 30 10Z"/>
                  </svg>
                  <svg *ngIf="selectedAvatar == 3" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 fill-primary" viewBox="0 0 60 60" fill="none">
                      <path d="M48.7501 36.25C48.4119 36.2088 48.0688 36.2451 47.7467 36.3562C47.4247 36.4673 47.1321 36.6502 46.8912 36.8911C46.6503 37.132 46.4674 37.4245 46.3563 37.7466C46.2452 38.0687 46.2089 38.4118 46.2501 38.75C46.2501 40.425 43.7501 40.425 43.7501 38.75V33L48.0001 31.75C49.8001 30.9 51.0251 29.2 51.2501 27.25C51.2501 13.75 41.7501 5 30.0001 5C18.2501 5 8.75012 13.75 8.75012 27.25C8.90012 29.25 10.1501 31 12.0001 31.75L16.2501 33V38.75C16.2501 39.0815 16.1184 39.3995 15.884 39.6339C15.6496 39.8683 15.3316 40 15.0001 40C14.6686 40 14.3507 39.8683 14.1162 39.6339C13.8818 39.3995 13.7501 39.0815 13.7501 38.75C13.7913 38.4118 13.755 38.0687 13.6439 37.7466C13.5329 37.4245 13.3499 37.132 13.109 36.8911C12.8681 36.6502 12.5756 36.4673 12.2535 36.3562C11.9314 36.2451 11.5883 36.2088 11.2501 36.25C10.9119 36.2088 10.5688 36.2451 10.2467 36.3562C9.92466 36.4673 9.63209 36.6502 9.39119 36.8911C9.15029 37.132 8.96737 37.4245 8.8563 37.7466C8.74523 38.0687 8.70892 38.4118 8.75012 38.75C8.71244 39.5808 8.84832 40.4103 9.14908 41.1856C9.44984 41.961 9.90888 42.6651 10.4969 43.2532C11.085 43.8412 11.7891 44.3003 12.5645 44.601C13.3398 44.9018 14.1693 45.0377 15.0001 45C18.5251 45.15 21.4001 42.275 21.2501 38.75V34.25H23.7501V48.5C23.7501 50.175 21.2501 50.175 21.2501 48.5C21.2913 48.1618 21.255 47.8187 21.1439 47.4966C21.0329 47.1745 20.8499 46.882 20.609 46.6411C20.3681 46.4002 20.0756 46.2173 19.7535 46.1062C19.4314 45.9951 19.0883 45.9588 18.7501 46C18.4119 45.9588 18.0688 45.9951 17.7467 46.1062C17.4247 46.2173 17.1321 46.4002 16.8912 46.6411C16.6503 46.882 16.4674 47.1745 16.3563 47.4966C16.2452 47.8187 16.2089 48.1618 16.2501 48.5C16.1781 49.3504 16.2884 50.2064 16.5735 51.0108C16.8587 51.8153 17.3122 52.5496 17.9037 53.1648C18.4953 53.78 19.2113 54.2619 20.0039 54.5784C20.7965 54.8949 21.6475 55.0386 22.5001 55C26.0251 55.15 28.9001 52.275 28.7501 48.75V35H31.2501V48.75C31.2124 49.5808 31.3483 50.4103 31.6491 51.1856C31.9498 51.961 32.4089 52.6651 32.9969 53.2532C33.585 53.8412 34.2891 54.3003 35.0645 54.601C35.8398 54.9018 36.6693 55.0377 37.5001 55C41.0251 55.15 43.9001 52.275 43.7501 48.75C43.7501 45.425 38.7501 45.425 38.7501 48.75C38.7501 50.425 36.2501 50.425 36.2501 48.75V34.5H38.7501V39C38.7501 42.4 41.5751 45.15 45.0001 45C48.5251 45.15 51.4001 42.275 51.2501 38.75C51.2913 38.4118 51.255 38.0687 51.1439 37.7466C51.0329 37.4245 50.8499 37.132 50.609 36.8911C50.3681 36.6502 50.0756 36.4673 49.7535 36.3562C49.4314 36.2451 49.0883 36.2088 48.7501 36.25ZM26.5001 11.75C24.6344 12.1583 22.8726 12.9461 21.3243 14.0643C19.776 15.1825 18.4743 16.6073 17.5001 18.25C17.0751 18.75 16.2501 18.925 15.7501 18.5C15.4887 18.2983 15.3164 18.0026 15.2697 17.6758C15.223 17.349 15.3057 17.0168 15.5001 16.75C17.8981 12.9858 21.6617 10.2975 26.0001 9.25C26.6751 9.2 27.2751 9.625 27.5001 10.25C27.6501 10.925 27.2001 11.625 26.5001 11.75Z" />
                  </svg>
                  <svg *ngIf="selectedAvatar == 4" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 fill-primary" viewBox="0 0 60 60" fill="none">
                      <path d="M55 40V45H50C46.5 45 43 44 40 42.5C33.75 45.75 26.25 45.75 20 42.5C17 44 13.5 45 10 45H5V40H10C13.5 40 17 38.75 20 36.75C26 41 34 41 40 36.75C43 38.75 46.5 40 50 40H55ZM13.2 34.475C14.55 34.075 15.925 33.45 17.225 32.6L20.075 30.675L22.9 32.675C25 34.15 27.5 35 30 35C32.5 35 35 34.15 37.1 32.675L39.925 30.675L42.775 32.6C44.825 33.975 47.075 34.75 49.175 34.925C45.6 18.5 30.925 5 15 5C14.125 5 13.325 5.45 12.875 6.175C12.425 6.925 12.375 7.85 12.775 8.625C18.2 19.475 16.525 28.225 13.2 34.475ZM40 46.75C34 51 26 51 20 46.75C17 48.75 13.5 50 10 50H5V55H10C13.5 55 17 54 20 52.5C26.25 55.75 33.75 55.75 40 52.5C43 54 46.5 55 50 55H55V50H50C46.5 50 43 48.75 40 46.75Z"/>
                  </svg>
                  <svg *ngIf="selectedAvatar == 5" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 fill-primary" viewBox="0 0 60 60" fill="none">
                    <path d="M21.175 14.875C22.375 14.175 23.675 13.6 25 13.2V9.99999C25 7.24999 27.175 4.99999 29.925 4.92499C32.825 4.99999 35 7.24999 35 9.99999V13.2C36.325 13.625 37.625 14.175 38.825 14.875L34.825 20.175H25.175L21.175 14.875ZM47.5 30C47.5 31.25 47.375 32.375 47.15 33.5L40.825 31.55L37.85 22.4L41.85 17.125C42.925 18.125 43.875 19.25 44.7 20.5C46.675 20.325 48.575 20.625 50.275 21.475C52.85 22.8 54.6 25.325 55 28.2L47.5 29.1V30ZM12.5 30V29.125L5 28.2C5.4 25.325 7.15 22.8 9.725 21.475C11.4148 20.6215 13.3337 20.3323 15.2 20.65C16.025 19.375 16.975 18.2 18.1 17.175L22.15 22.375L19.175 31.55L12.85 33.5C12.625 32.375 12.5 31.25 12.5 30ZM25.6 23.925H34.4L37.125 32.325L30 37.5L22.875 32.325L25.6 23.925ZM20.325 35.125L28.125 40.775V47.4C26.7 47.25 25.325 46.925 24.05 46.45L20.975 53.35C19.6696 52.7704 18.5265 51.8791 17.646 50.7545C16.7655 49.6299 16.1745 48.3063 15.925 46.9C15.575 45 15.875 43.1 16.725 41.4C15.6 40.1 14.675 38.65 13.975 37.05L20.325 35.125ZM39.675 35.125L46.025 37.05C45.325 38.65 44.4 40.1 43.275 41.4C44.125 43.1 44.425 45 44.1 46.9C43.8418 48.3065 43.2448 49.629 42.3605 50.7529C41.4762 51.8767 40.3313 52.7682 39.025 53.35L35.975 46.45C34.65 46.925 33.325 47.35 31.875 47.5V40.775L39.675 35.125Z"/>
                  </svg>
                  <svg *ngIf="selectedAvatar == 6" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 fill-primary" viewBox="0 0 42 42">
                    <path d="M5.75 23.875L19.75 3.8025V23.875H5.75ZM22.375 23.875C24.7375 17.3125 24.4225 8.4925 22.375 2C30.705 4.695 37.075 14.95 37.18 23.875H22.375ZM37.425 30.14C36.7075 31.26 35.8675 32.2225 34.8875 33.045C33.75 32.5375 32.735 31.75 31.93 30.875C29.3225 34.2525 24.055 34.2525 21.4475 30.875C18.875 34.2525 13.5725 34.2525 11 30.875C10.125 31.75 9.1625 32.5375 8.025 33.045C6.03 31.4 4.525 29.055 4 26.5H38.895C38.6231 27.7904 38.1255 29.0227 37.425 30.14ZM37.18 40.5C35.325 40.5 33.575 40.0625 31.93 39.1875C28.71 40.9375 24.6675 40.9375 21.4475 39.1875C18.2275 40.9375 14.185 40.9375 11 39.1875C8.8475 40.395 6.38 40.5875 4 40.5V37C6.4675 37.0875 8.8475 36.825 11 35.25C14.045 37.4375 18.3675 37.4375 21.4475 35.25C24.545 37.4375 28.85 37.4375 31.93 35.25C34.0475 36.825 36.445 37.0875 38.895 37V40.5H37.18Z"/>
                  </svg>
                  <svg *ngIf="selectedAvatar == 0" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 fill-primary" viewBox="0 0 42 42">
                    <path d="M5.75 23.875L19.75 3.8025V23.875H5.75ZM22.375 23.875C24.7375 17.3125 24.4225 8.4925 22.375 2C30.705 4.695 37.075 14.95 37.18 23.875H22.375ZM37.425 30.14C36.7075 31.26 35.8675 32.2225 34.8875 33.045C33.75 32.5375 32.735 31.75 31.93 30.875C29.3225 34.2525 24.055 34.2525 21.4475 30.875C18.875 34.2525 13.5725 34.2525 11 30.875C10.125 31.75 9.1625 32.5375 8.025 33.045C6.03 31.4 4.525 29.055 4 26.5H38.895C38.6231 27.7904 38.1255 29.0227 37.425 30.14ZM37.18 40.5C35.325 40.5 33.575 40.0625 31.93 39.1875C28.71 40.9375 24.6675 40.9375 21.4475 39.1875C18.2275 40.9375 14.185 40.9375 11 39.1875C8.8475 40.395 6.38 40.5875 4 40.5V37C6.4675 37.0875 8.8475 36.825 11 35.25C14.045 37.4375 18.3675 37.4375 21.4475 35.25C24.545 37.4375 28.85 37.4375 31.93 35.25C34.0475 36.825 36.445 37.0875 38.895 37V40.5H37.18Z"/>
                  </svg>
                </div>
              </div>

              <div *ngIf="username" class="chat-header">
                {{username}}
              </div>
              <div *ngIf="!username" class="chat-header">
                Jogador
              </div>
              <div class="chat-bubble text-xs md:text-sm lg:text-base py-1.5 px-2 sm:py-2 sm:px-4 max-w-[90%] sm:max-w-[65%] break-words font-text">{{dialog.input}}</div>
        </div>

        <div *ngIf="dialog.answer && dialog.id !== 'loading'" class="chat chat-start">
          <div class="chat-image">
            <div class="btn btn-secondary btn-circle w-8 h-8 sm:w-11 sm:h-11 md:w-13 md:h-13 pointer-events-none">
              <svg *ngIf="dialog.emotion == 0" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-7 sm:h-7 md:w-8 md:h-8 fill-primary" viewBox="0 0 40 36" fill="none">
                <path d="M20 0C20.9644 0 21.8893 0.379285 22.5713 1.05442C23.2532 1.72955 23.6364 2.64522 23.6364 3.6C23.6364 4.932 22.9091 6.102 21.8182 6.714V9H23.6364C27.0118 9 30.2491 10.3275 32.6359 12.6905C35.0227 15.0534 36.3636 18.2583 36.3636 21.6H38.1818C38.664 21.6 39.1265 21.7896 39.4675 22.1272C39.8084 22.4648 40 22.9226 40 23.4V28.8C40 29.2774 39.8084 29.7352 39.4675 30.0728C39.1265 30.4104 38.664 30.6 38.1818 30.6H36.3636V32.4C36.3636 33.3548 35.9805 34.2705 35.2986 34.9456C34.6166 35.6207 33.6917 36 32.7273 36H7.27273C6.3083 36 5.38338 35.6207 4.70143 34.9456C4.01948 34.2705 3.63636 33.3548 3.63636 32.4V30.6H1.81818C1.33597 30.6 0.873508 30.4104 0.532533 30.0728C0.191558 29.7352 0 29.2774 0 28.8V23.4C0 22.9226 0.191558 22.4648 0.532533 22.1272C0.873508 21.7896 1.33597 21.6 1.81818 21.6H3.63636C3.63636 18.2583 4.97727 15.0534 7.3641 12.6905C9.75092 10.3275 12.9882 9 16.3636 9H18.1818V6.714C17.0909 6.102 16.3636 4.932 16.3636 3.6C16.3636 2.64522 16.7468 1.72955 17.4287 1.05442C18.1107 0.379285 19.0356 0 20 0ZM11.8182 19.8C10.6127 19.8 9.4565 20.2741 8.60406 21.118C7.75162 21.9619 7.27273 23.1065 7.27273 24.3C7.27273 25.4935 7.75162 26.6381 8.60406 27.482C9.4565 28.3259 10.6127 28.8 11.8182 28.8C13.0237 28.8 14.1799 28.3259 15.0323 27.482C15.8847 26.6381 16.3636 25.4935 16.3636 24.3C16.3636 23.1065 15.8847 21.9619 15.0323 21.118C14.1799 20.2741 13.0237 19.8 11.8182 19.8ZM28.1818 19.8C26.9763 19.8 25.8201 20.2741 24.9677 21.118C24.1153 21.9619 23.6364 23.1065 23.6364 24.3C23.6364 25.4935 24.1153 26.6381 24.9677 27.482C25.8201 28.3259 26.9763 28.8 28.1818 28.8C29.3873 28.8 30.5435 28.3259 31.3959 27.482C32.2484 26.6381 32.7273 25.4935 32.7273 24.3C32.7273 23.1065 32.2484 21.9619 31.3959 21.118C30.5435 20.2741 29.3873 19.8 28.1818 19.8Z" fill="#011826"/>
              </svg>
              <svg *ngIf="dialog.emotion == 1" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 sm:w-8 sm:h-8 md:w-9 md:h-9 fill-primary" viewBox="0 0 24 24">
                <path fill="currentColor" d="M22 14h-1c0-3.87-3.13-7-7-7h-1V5.73A2 2 0 1 0 10 4c0 .74.4 1.39 1 1.73V7h-1c-3.87 0-7 3.13-7 7H2c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h1v1a2 2 0 0 0 2 2h14c1.11 0 2-.89 2-2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1M9.79 16.5C9.4 15.62 8.53 15 7.5 15s-1.9.62-2.29 1.5c-.13-.31-.21-.64-.21-1a2.5 2.5 0 0 1 5 0c0 .36-.08.69-.21 1m9 0c-.39-.88-1.29-1.5-2.29-1.5s-1.9.62-2.29 1.5c-.13-.31-.21-.64-.21-1a2.5 2.5 0 0 1 5 0c0 .36-.08.69-.21 1"/>
              </svg>
              <svg *ngIf="dialog.emotion == 2" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 sm:w-8 sm:h-8 md:w-9 md:h-9 fill-primary" viewBox="0 0 24 24" xmlns:bx="https://boxy-svg.com">
                <path d="M 12 2 C 13.105 2 14 2.895 14 4 C 14 4.74 13.6 5.39 13 5.73 L 13 7 L 14 7 C 17.866 7 21 10.134 21 14 L 22 14 C 22.552 14 23 14.448 23 15 L 23 18 C 23 18.552 22.552 19 22 19 L 21 19 L 21 20 C 21 21.105 20.105 22 19 22 L 5 22 C 3.895 22 3 21.105 3 20 L 3 19 L 2 19 C 1.448 19 1 18.552 1 18 L 1 15 C 1 14.448 1.448 14 2 14 L 3 14 C 3 10.134 6.134 7 10 7 L 11 7 L 11 5.73 C 10.4 5.39 10 4.74 10 4 C 10 2.895 10.895 2 12 2 M 7.5 16.195 C 6.119 16.195 5 14.119 5 15.5 C 5 16.881 6.119 18 7.5 18 C 8.881 18 10 16.881 10 15.5 C 10 14.119 8.831 16.246 7.45 16.246 M 16.5 16.195 C 15.119 16.195 14 14.119 14 15.5 C 14 16.881 15.119 18 16.5 18 C 17.881 18 19 16.881 19 15.5 C 19 14.119 17.931 16.195 16.55 16.195"/>
              </svg>
              <svg *ngIf="dialog.emotion == 3" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 sm:w-8 sm:h-8 md:w-9 md:h-9 fill-primary" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20 4h-2V3h2.5c.28 0 .5.22.5.5v2c0 .28-.22.5-.5.5H20v1h-1V5h1zm-1 5h1V8h-1zm-2-6h-1v4h1zm6 12v3c0 .55-.45 1-1 1h-1v1c0 1.11-.89 2-2 2H5a2 2 0 0 1-2-2v-1H2c-.55 0-1-.45-1-1v-3c0-.55.45-1 1-1h1c0-3.87 3.13-7 7-7h1V5.73c-.6-.34-1-.99-1-1.73c0-1.1.9-2 2-2s2 .9 2 2c0 .74-.4 1.39-1 1.73V7h1c.34 0 .67.03 1 .08V10h4.74A6.94 6.94 0 0 1 21 14h1c.55 0 1 .45 1 1m-13 .5a2.5 2.5 0 0 0-5 0a2.5 2.5 0 0 0 5 0m9 0a2.5 2.5 0 0 0-5 0a2.5 2.5 0 0 0 5 0M17 8h-1v1h1z"/>
              </svg>
              <svg *ngIf="dialog.emotion == 4" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 sm:w-8 sm:h-8 md:w-9 md:h-9 fill-primary" viewBox="0 0 24 24">
                <path fill="currentColor" d="M22 14h-1c0-3.87-3.13-7-7-7h-1V5.73A2 2 0 1 0 10 4c0 .74.4 1.39 1 1.73V7h-1c-3.87 0-7 3.13-7 7H2c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h1v1a2 2 0 0 0 2 2h14c1.11 0 2-.89 2-2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1M9.86 16.68l-1.18 1.18l-1.18-1.18l-1.18 1.18l-1.18-1.18l1.18-1.18l-1.18-1.18l1.18-1.18l1.18 1.18l1.18-1.18l1.18 1.18l-1.18 1.18zm9 0l-1.18 1.18l-1.18-1.18l-1.18 1.18l-1.18-1.18l1.18-1.18l-1.18-1.18l1.18-1.18l1.18 1.18l1.18-1.18l1.18 1.18l-1.18 1.18z"/>
              </svg>
              <svg *ngIf="dialog.emotion == 5" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 sm:w-8 sm:h-8 md:w-9 md:h-9 fill-primary" viewBox="0 0 24 24">
                <path fill="currentColor" d="M22 14h-1c0-3.87-3.13-7-7-7h-1V5.73A2 2 0 1 0 10 4c0 .74.4 1.39 1 1.73V7h-1c-3.87 0-7 3.13-7 7H2c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h1v1a2 2 0 0 0 2 2h14c1.11 0 2-.89 2-2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1M7.5 18A2.5 2.5 0 0 1 5 15.5c0-.82.4-1.54 1-2l3.83 2.88C9.5 17.32 8.57 18 7.5 18m9 0c-1.07 0-2-.68-2.33-1.62L18 13.5c.6.46 1 1.18 1 2a2.5 2.5 0 0 1-2.5 2.5"/>
              </svg>
              <svg *ngIf="dialog.emotion == 6" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 sm:w-8 sm:h-8 md:w-9 md:h-9 fill-primary" viewBox="0 0 24 24">
                <path fill="currentColor" d="M22 14h-1c0-3.87-3.13-7-7-7h-1V5.73A2 2 0 1 0 10 4c0 .74.4 1.39 1 1.73V7h-1c-3.87 0-7 3.13-7 7H2c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h1v1a2 2 0 0 0 2 2h14c1.11 0 2-.89 2-2v-1h1c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1M9.7 15.45l-.73.73l-1.47 1.47l-2.2-2.2c-.4-.4-.4-1.06 0-1.45c.41-.42 1.06-.42 1.47 0l.73.72l.73-.72c.41-.42 1.06-.42 1.47 0c.4.39.4 1.05 0 1.45m9 0l-.73.73l-1.47 1.47l-2.2-2.2c-.4-.4-.4-1.06 0-1.45c.41-.42 1.06-.42 1.47 0l.73.72l.73-.72c.41-.42 1.06-.42 1.47 0c.4.39.4 1.05 0 1.45"/>
              </svg>
            </div>
          </div>
          <div class="chat-header">
            Blabinha
          </div>
          <div class="chat-bubble text-xs md:text-sm lg:text-base py-1.5 px-2 sm:py-2 sm:px-4 max-w-[90%] sm:max-w-[65%] break-words">
            {{ cleanMessage(dialog.answer) }}
             <span *ngFor="let block of blocks">
              <p [innerHTML]="block" class="text-xs md:text-sm lg:text-base break-words"></p>
             </span>
          </div>
        </div>


        <div *ngIf="!dialog.answer && dialog.id === 'loading'" class="chat chat-start">
          <div class="chat-image">
            <div class="btn btn-secondary btn-circle w-8 h-8 sm:w-11 sm:h-11 md:w-13 md:h-13 pointer-events-none">
              <svg *ngIf="dialog.emotion == 0" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-7 sm:h-7 md:w-8 md:h-8 fill-primary" viewBox="0 0 40 36" fill="none">
                <path d="M20 0C20.9644 0 21.8893 0.379285 22.5713 1.05442C23.2532 1.72955 23.6364 2.64522 23.6364 3.6C23.6364 4.932 22.9091 6.102 21.8182 6.714V9H23.6364C27.0118 9 30.2491 10.3275 32.6359 12.6905C35.0227 15.0534 36.3636 18.2583 36.3636 21.6H38.1818C38.664 21.6 39.1265 21.7896 39.4675 22.1272C39.8084 22.4648 40 22.9226 40 23.4V28.8C40 29.2774 39.8084 29.7352 39.4675 30.0728C39.1265 30.4104 38.664 30.6 38.1818 30.6H36.3636V32.4C36.3636 33.3548 35.9805 34.2705 35.2986 34.9456C34.6166 35.6207 33.6917 36 32.7273 36H7.27273C6.3083 36 5.38338 35.6207 4.70143 34.9456C4.01948 34.2705 3.63636 33.3548 3.63636 32.4V30.6H1.81818C1.33597 30.6 0.873508 30.4104 0.532533 30.0728C0.191558 29.7352 0 29.2774 0 28.8V23.4C0 22.9226 0.191558 22.4648 0.532533 22.1272C0.873508 21.7896 1.33597 21.6 1.81818 21.6H3.63636C3.63636 18.2583 4.97727 15.0534 7.3641 12.6905C9.75092 10.3275 12.9882 9 16.3636 9H18.1818V6.714C17.0909 6.102 16.3636 4.932 16.3636 3.6C16.3636 2.64522 16.7468 1.72955 17.4287 1.05442C18.1107 0.379285 19.0356 0 20 0ZM11.8182 19.8C10.6127 19.8 9.4565 20.2741 8.60406 21.118C7.75162 21.9619 7.27273 23.1065 7.27273 24.3C7.27273 25.4935 7.75162 26.6381 8.60406 27.482C9.4565 28.3259 10.6127 28.8 11.8182 28.8C13.0237 28.8 14.1799 28.3259 15.0323 27.482C15.8847 26.6381 16.3636 25.4935 16.3636 24.3C16.3636 23.1065 15.8847 21.9619 15.0323 21.118C14.1799 20.2741 13.0237 19.8 11.8182 19.8ZM28.1818 19.8C26.9763 19.8 25.8201 20.2741 24.9677 21.118C24.1153 21.9619 23.6364 23.1065 23.6364 24.3C23.6364 25.4935 24.1153 26.6381 24.9677 27.482C25.8201 28.3259 26.9763 28.8 28.1818 28.8C29.3873 28.8 30.5435 28.3259 31.3959 27.482C32.2484 26.6381 32.7273 25.4935 32.7273 24.3C32.7273 23.1065 32.2484 21.9619 31.3959 21.118C30.5435 20.2741 29.3873 19.8 28.1818 19.8Z" fill="#011826"/>
              </svg>
              
            </div>
          </div>
          <div class="chat-header">
            Blabinha
          </div>
          <div class="chat-bubble text-xs md:text-sm lg:text-base py-1.5 px-2 sm:py-2 sm:px-4 max-w-[90%] sm:max-w-[65%] break-words">
             <span class="loading loading-dots loading-sm sm:loading-lg"></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Área de input fixa embaixo -->
  <div class="w-full max-w-sm sm:max-w-lg md:max-w-2xl responsive absolute bottom-0 px-2 responsive2 sm:px-0 md:px-0 h-30 md:h-42 bg-base-100 rounded-t-4xl">
    <fieldset class="bg-secondary rounded-4xl p-4 flex flex-col gap-2">
      <textarea [disabled]="isSending" [value]="null" id="textarea"
        class="text-base-100 w-full bg-secondary resize-none border-0 focus:outline-none p-2 rounded-xl
        sm:text-sm text-xs placeholder-base-100/65  max-h-20 overflow-y-auto md:h-20"
        (keydown.enter)="sendMessage(''); $event.preventDefault()"
        placeholder="Digite alguma coisa...">
      </textarea>

      <div class="flex justify-between items-center">
          <svg (click)="this.modalComponent.openModal(true)" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-6 md:w-6 fill-primary cursor-pointer
          hover:scale-110 active:scale-95 transition duration-200 ease-in-out" viewBox="0 0 25 25" fill="none">
            <path d="M11.25 18.75H13.75V11.25H11.25V18.75ZM12.5 8.75C12.8542 8.75 13.1512 8.63 13.3912 8.39C13.6312 8.15 13.7508 7.85333 13.75 7.5C13.7492 7.14666 13.6292 6.85 13.39 6.61C13.1508 6.37 12.8542 6.25 12.5 6.25C12.1458 6.25 11.8492 6.37 11.61 6.61C11.3708 6.85 11.2508 7.14666 11.25 7.5C11.2492 7.85333 11.3692 8.15041 11.61 8.39125C11.8508 8.63208 12.1475 8.75166 12.5 8.75ZM12.5 25C10.7708 25 9.14583 24.6717 7.625 24.015C6.10416 23.3583 4.78125 22.4679 3.65625 21.3437C2.53125 20.2196 1.64083 18.8967 0.985001 17.375C0.329168 15.8533 0.000834915 14.2283 1.58228e-06 12.5C-0.000831751 10.7717 0.327501 9.14666 0.985001 7.625C1.6425 6.10333 2.53292 4.78042 3.65625 3.65625C4.77958 2.53208 6.1025 1.64167 7.625 0.985C9.1475 0.328333 10.7725 0 12.5 0C14.2275 0 15.8525 0.328333 17.375 0.985C18.8975 1.64167 20.2204 2.53208 21.3437 3.65625C22.4671 4.78042 23.3579 6.10333 24.0162 7.625C24.6746 9.14666 25.0025 10.7717 25 12.5C24.9975 14.2283 24.6692 15.8533 24.015 17.375C23.3608 18.8967 22.4704 20.2196 21.3437 21.3437C20.2171 22.4679 18.8942 23.3587 17.375 24.0162C15.8558 24.6737 14.2308 25.0017 12.5 25ZM12.5 22.5C15.2917 22.5 17.6562 21.5312 19.5937 19.5937C21.5312 17.6562 22.5 15.2917 22.5 12.5C22.5 9.70833 21.5312 7.34375 19.5937 5.40625C17.6562 3.46875 15.2917 2.5 12.5 2.5C9.70833 2.5 7.34375 3.46875 5.40625 5.40625C3.46875 7.34375 2.5 9.70833 2.5 12.5C2.5 15.2917 3.46875 17.6562 5.40625 19.5937C7.34375 21.5312 9.70833 22.5 12.5 22.5Z"/>
          </svg>

          <svg (click)="sendMessage('')" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 md:h-10 md:w-10 fill-primary cursor-pointer
          hover:scale-110 active:scale-95 transition duration-200 ease-in-out" viewBox="0 0 47 47" fill="none">
            <path d="M21.15 32.9H25.85V23.03L29.61 26.79L32.9 23.5L23.5 14.1L14.1 23.5L17.39 26.79L21.15 23.03V32.9ZM23.5 47C20.2492 47 17.1942 46.3827 14.335 45.1482C11.4758 43.9137 8.98875 42.2397 6.87375 40.1262C4.75875 38.0128 3.08477 35.5257 1.8518 32.665C0.618836 29.8043 0.00156964 26.7493 2.97468e-06 23.5C-0.00156369 20.2507 0.615703 17.1957 1.8518 14.335C3.0879 11.4743 4.76188 8.98718 6.87375 6.87375C8.98561 4.76032 11.4727 3.08633 14.335 1.8518C17.1973 0.617267 20.2523 0 23.5 0C26.7477 0 29.8027 0.617267 32.665 1.8518C35.5273 3.08633 38.0144 4.76032 40.1262 6.87375C42.2381 8.98718 43.9129 11.4743 45.1505 14.335C46.3882 17.1957 47.0047 20.2507 47 23.5C46.9953 26.7493 46.378 29.8043 45.1482 32.665C43.9183 35.5257 42.2444 38.0128 40.1262 40.1262C38.0081 42.2397 35.521 43.9144 32.665 45.1505C29.8089 46.3866 26.754 47.0031 23.5 47Z"/>
          </svg>
      </div>
    </fieldset>
  </div> 
</div>

<app-phase-modal></app-phase-modal>

<!-- Alerta com transição -->
<div *ngFor="let alert of alerts; let i = index"
  role="alert"
  class="alert transition-opacity duration-500 ease-in-out animate-fade-in
    absolute top-2 right-2 z-10 w-xs"
  [class.alert-warning]="typeOfError == 1"
  [class.alert-error]="typeOfError == 2"
  [style.top.px]="20 + (i * 60)" >
  <svg *ngIf="typeOfError === 1" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
  </svg>
  <svg *ngIf="typeOfError === 2" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>
  <span>{{ alert }}</span>
</div>